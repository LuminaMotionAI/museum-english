<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>미술관 영어 표현</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --color-slate-900: #0f172a;
      --color-slate-800: #1e293b;
      --color-slate-700: #334155;
      --color-slate-600: #475569;
      --color-slate-500: #64748b;
      --color-slate-400: #94a3b8;
      --color-slate-300: #cbd5e1;
      --color-blue-900: #1e3a8a;
      --color-blue-600: #2563eb;
      --color-blue-300: #93c5fd;
      --color-emerald-500: #10b981;
      --color-emerald-400: #34d399;
      --color-red-400: #f87171;
      --color-white: #ffffff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
        Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background: linear-gradient(to bottom, var(--color-slate-900), var(--color-slate-800));
      color: var(--color-slate-300);
      min-height: 100vh;
    }

    .container {
      display: flex;
      min-height: 100vh;
    }

    /* 사이드바 */
    .sidebar {
      width: 16rem;
      background-color: var(--color-slate-900);
      padding: 1.5rem;
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      z-index: 10;
    }

    .sidebar-header {
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--color-slate-700);
    }

    .sidebar-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--color-white);
    }

    .category-title {
      font-size: 0.875rem;
      color: var(--color-slate-400);
      margin-bottom: 0.5rem;
    }

    .category-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }

    .category-button {
      width: 100%;
      text-align: left;
      padding: 0.5rem 0.75rem;
      border-radius: 0.25rem;
      background: none;
      border: none;
      color: var(--color-slate-300);
      font-size: 0.875rem;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .category-button:hover {
      background-color: var(--color-slate-800);
    }

    .category-button.active {
      background-color: var(--color-blue-600);
      color: var(--color-white);
    }

    .category-button .count {
      float: right;
      font-size: 0.75rem;
      opacity: 0.8;
    }

    .sidebar-footer {
      margin-top: auto;
      padding-top: 1.5rem;
      border-top: 1px solid var(--color-slate-700);
      font-size: 0.75rem;
      color: var(--color-slate-500);
    }

    .sidebar-footer p + p {
      margin-top: 0.25rem;
    }

    /* 메인 콘텐츠 */
    .main-content {
      flex: 1;
      margin-left: 16rem;
      padding: 1.5rem;
      max-width: 1024px;
      margin-right: auto;
    }

    .mobile-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .mobile-title {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .mobile-menu-button {
      background: none;
      border: none;
      color: var(--color-slate-300);
      padding: 0.5rem;
      border-radius: 9999px;
      cursor: pointer;
    }

    .mobile-menu-button:hover {
      background-color: var(--color-slate-700);
    }

    .main-title {
      font-size: 1.875rem;
      font-weight: 800;
      margin-bottom: 2rem;
      background: linear-gradient(to right, #60a5fa, #34d399);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .search-container {
      background-color: var(--color-slate-800);
      border-radius: 0.5rem;
      padding: 1rem;
      margin-bottom: 2rem;
    }

    .search-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      background-color: var(--color-slate-700);
      border: 1px solid var(--color-slate-600);
      color: var(--color-white);
      font-size: 1rem;
      outline: none;
    }

    .search-input::placeholder {
      color: var(--color-slate-400);
    }

    .search-input:focus {
      outline: 2px solid var(--color-blue-600);
    }

    .mobile-categories {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .mobile-category-button {
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      background-color: var(--color-slate-700);
      border: none;
      color: var(--color-slate-300);
      font-size: 0.75rem;
      font-weight: 500;
      cursor: pointer;
    }

    .mobile-category-button:hover {
      background-color: var(--color-slate-600);
    }

    .mobile-category-button.active {
      background-color: var(--color-blue-600);
      color: var(--color-white);
    }

    .stats-container {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background-color: var(--color-slate-800);
      border-radius: 0.5rem;
      padding: 1rem;
    }

    .stat-title {
      font-size: 0.875rem;
      color: var(--color-slate-400);
      font-weight: 500;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 600;
      margin-top: 0.25rem;
    }

    .progress-bar {
      height: 0.5rem;
      background-color: var(--color-slate-700);
      border-radius: 9999px;
      overflow: hidden;
      margin-top: 0.5rem;
    }

    .progress-value {
      height: 100%;
      background-color: var(--color-emerald-500);
    }

    .empty-results {
      background-color: var(--color-slate-800);
      border-radius: 0.5rem;
      padding: 2rem;
      text-align: center;
      color: var(--color-slate-400);
    }

    .results-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .result-card {
      background-color: var(--color-slate-800);
      border-radius: 0.5rem;
      border: 1px solid var(--color-slate-700);
      overflow: hidden;
    }

    .result-card-content {
      padding: 1rem;
    }

    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 0.5rem;
    }

    .result-tag {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.5rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      background-color: var(--color-blue-900);
      color: var(--color-blue-300);
    }

    .result-number {
      font-size: 0.75rem;
      color: var(--color-slate-500);
    }

    .result-english {
      font-size: 1.125rem;
      font-weight: 500;
      color: var(--color-emerald-400);
      margin-bottom: 0.25rem;
    }

    .result-korean {
      color: var(--color-slate-300);
      margin-bottom: 0.75rem;
    }

    .result-audio {
      width: 100%;
    }

    .error-message {
      color: var(--color-red-400);
      font-size: 0.875rem;
    }

    .footer {
      margin-top: 3rem;
      text-align: center;
      font-size: 0.875rem;
      color: var(--color-slate-500);
    }

    /* 커스텀 오디오 스타일 */
    audio::-webkit-media-controls-panel {
      background-color: var(--color-slate-800);
      border-radius: 4px;
    }

    audio::-webkit-media-controls-play-button {
      background-color: var(--color-blue-600);
      border-radius: 50%;
    }

    audio::-webkit-media-controls-play-button:hover {
      background-color: var(--color-blue-900);
    }

    audio::-webkit-media-controls-timeline {
      background-color: var(--color-slate-700);
      border-radius: 10px;
      margin-left: 5px;
      margin-right: 5px;
    }

    audio::-webkit-media-controls-current-time-display,
    audio::-webkit-media-controls-time-remaining-display {
      color: var(--color-slate-300);
    }

    /* 반응형 디자인 */
    @media (min-width: 768px) {
      .mobile-header {
        display: none;
      }

      .main-title {
        display: block;
      }

      .mobile-categories {
        display: none;
      }

      .stats-container {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    @media (max-width: 767px) {
      .sidebar {
        display: none;
      }

      .main-content {
        margin-left: 0;
      }

      .main-title {
        display: none;
      }
    }

    /* 챗봇 스타일 */
    .chatbot-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: var(--color-blue-600);
      color: white;
      border: none;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .chatbot-toggle:hover {
      background-color: var(--color-blue-900);
    }

    .chatbot-container {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 350px;
      height: 500px;
      background-color: var(--color-slate-800);
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      z-index: 100;
      overflow: hidden;
      opacity: 0;
      visibility: hidden;
      transform: translateY(20px);
      transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
    }

    .chatbot-container.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .chatbot-header {
      background-color: var(--color-blue-600);
      color: white;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chatbot-title {
      font-weight: 600;
    }

    .chatbot-close {
      background: none;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
    }

    .chatbot-messages {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .chatbot-message {
      display: flex;
      margin-bottom: 10px;
    }

    .chatbot-message.bot {
      align-self: flex-start;
    }

    .chatbot-message.user {
      align-self: flex-end;
      justify-content: flex-end;
    }

    .chatbot-avatar {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: var(--color-blue-300);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 10px;
    }

    .chatbot-text {
      background-color: var(--color-slate-700);
      padding: 10px 15px;
      border-radius: 15px;
      max-width: 80%;
    }

    .chatbot-message.user .chatbot-text {
      background-color: var(--color-blue-600);
    }

    .chatbot-input-container {
      display: flex;
      padding: 15px;
      border-top: 1px solid var(--color-slate-700);
    }

    #chatbotInput {
      flex: 1;
      padding: 10px 15px;
      border-radius: 20px;
      border: 1px solid var(--color-slate-600);
      background-color: var(--color-slate-700);
      color: white;
      outline: none;
    }

    #chatbotSend {
      background-color: var(--color-blue-600);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-left: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chatbotSend:hover {
      background-color: var(--color-blue-900);
    }

    @media (max-width: 767px) {
      .chatbot-container {
        width: calc(100% - 40px);
        height: 400px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- 사이드바 -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h2 class="sidebar-title">🎧 미술관 영어</h2>
      </div>
      
      <div class="category-section">
        <h3 class="category-title">카테고리</h3>
        <div class="category-list">
          <!-- 카테고리 버튼은 자바스크립트로 생성됩니다 -->
        </div>
      </div>
      
      <div class="sidebar-footer">
        <p>© 2024 미술관 영어 학습기</p>
        <p>v1.0.0</p>
      </div>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="main-content">
      <!-- 모바일용 헤더 -->
      <div class="mobile-header">
        <h1 class="mobile-title">🎧 미술관 영어</h1>
        <button class="mobile-menu-button">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="24" height="24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
          </svg>
        </button>
      </div>

      <!-- 제목 -->
      <h1 class="main-title">ArtMuse 영어 컬렉션 – 미술관에서 꼭 쓰는 표현</h1>
      
      <!-- 검색 -->
      <div class="search-container">
        <input
          type="text"
          id="searchInput"
          placeholder="🔍 문장 검색 (영어 또는 한국어)"
          class="search-input"
        >

        <!-- 모바일용 카테고리 필터 -->
        <div class="mobile-categories">
          <!-- 모바일 카테고리 버튼은 자바스크립트로 생성됩니다 -->
        </div>
      </div>

      <!-- 통계 카드 -->
      <div class="stats-container">
        <div class="stat-card">
          <h3 class="stat-title">전체 표현</h3>
          <p class="stat-value" id="totalCount">0</p>
        </div>
        <div class="stat-card">
          <h3 class="stat-title">검색 결과</h3>
          <p class="stat-value" id="filteredCount">0</p>
        </div>
        <div class="stat-card">
          <h3 class="stat-title">카테고리</h3>
          <p class="stat-value" id="categoryCount">0</p>
        </div>
        <div class="stat-card">
          <h3 class="stat-title">학습 진행도</h3>
          <div class="progress-bar">
            <div class="progress-value" style="width: 45%"></div>
          </div>
        </div>
      </div>

      <!-- 결과 목록 -->
      <div id="results">
        <!-- 결과는 자바스크립트로 생성됩니다 -->
      </div>

      <!-- Footer -->
      <footer class="footer">
        <p>© 2025 ArtMuse English. All rights reserved</p>
      </footer>
    </div>
  </div>

  <!-- 챗봇 UI -->
  <div class="chatbot-container" id="chatbotContainer">
    <div class="chatbot-header">
      <div class="chatbot-title">미술관 영어 도우미</div>
      <button class="chatbot-close" id="chatbotClose">×</button>
    </div>
    <div class="chatbot-messages" id="chatbotMessages">
      <!-- 메시지는 JS로 추가됩니다 -->
    </div>
    <div class="chatbot-input-container">
      <input type="text" id="chatbotInput" placeholder="질문을 입력하세요...">
      <button id="chatbotSend">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="22" y1="2" x2="11" y2="13"></line>
          <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
        </svg>
      </button>
    </div>
  </div>
  
  <!-- 챗봇 토글 버튼 -->
  <button class="chatbot-toggle" id="chatbotToggle">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
    </svg>
  </button>

  <script>
    // 데이터
    const museumData = [
      { english: "What time does the museum open?", korean: "박물관은 몇 시에 열리나요?", audio: "sentence_1.mp3", category: "입장" },
      { english: "What time does the museum close?", korean: "박물관은 몇 시에 문을 닫나요?", audio: "sentence_2.mp3", category: "입장" },
      { english: "How much is the admission fee?", korean: "입장료는 얼마인가요?", audio: "sentence_3.mp3", category: "입장" },
      { english: "Is there a discount for students?", korean: "학생 할인 있나요?", audio: "sentence_4.mp3", category: "입장" },
      { english: "Are guided tours available?", korean: "가이드 투어가 있나요?", audio: "sentence_5.mp3", category: "전시관람" },
      { english: "When does the next guided tour start?", korean: "다음 가이드 투어는 언제 시작하나요?", audio: "sentence_6.mp3", category: "전시관람" },
      { english: "Is there an audio guide in English?", korean: "영어 오디오 가이드가 있나요?", audio: "sentence_7.mp3", category: "전시관람" },
      { english: "Where can I get a brochure or map?", korean: "브로셔나 지도를 어디서 받을 수 있나요?", audio: "sentence_8.mp3", category: "안내정보" },
      { english: "Can I buy tickets online?", korean: "온라인으로 티켓을 구매할 수 있나요?", audio: "sentence_9.mp3", category: "입장" },
      { english: "Are re-entry passes allowed?", korean: "재입장이 가능한가요?", audio: "sentence_10.mp3", category: "입장" },
      { english: "Where is the Impressionist section?", korean: "인상파 전시 구역은 어디에 있나요?", audio: "sentence_11.mp3", category: "전시위치" },
      { english: "Who is the artist of this painting?", korean: "이 그림의 작가는 누구인가요?", audio: "sentence_12.mp3", category: "작품정보" },
      { english: "When was this artwork created?", korean: "이 작품은 언제 만들어졌나요?", audio: "sentence_13.mp3", category: "작품정보" },
      { english: "What materials were used in this sculpture?", korean: "이 조각에는 어떤 재료가 사용되었나요?", audio: "sentence_14.mp3", category: "작품정보" },
      { english: "Is this an original or a replica?", korean: "이것은 원본인가요, 복제품인가요?", audio: "sentence_15.mp3", category: "작품정보" },
      { english: "Can I take pictures here?", korean: "여기서 사진을 찍을 수 있나요?", audio: "sentence_16.mp3", category: "이용규칙" },
      { english: "Is flash photography allowed?", korean: "플래시 촬영이 가능한가요?", audio: "sentence_17.mp3", category: "이용규칙" },
      { english: "How old is this artifact?", korean: "이 유물은 얼마나 오래되었나요?", audio: "sentence_18.mp3", category: "작품정보" },
      { english: "Is this piece part of a temporary exhibit?", korean: "이 작품은 임시 전시의 일부인가요?", audio: "sentence_19.mp3", category: "전시" },
      { english: "Are there any interactive exhibits?", korean: "체험형 전시물이 있나요?", audio: "sentence_20.mp3", category: "전시" },
      { english: "I'm looking for the Van Gogh collection.", korean: "반 고흐 컬렉션을 찾고 있어요.", audio: "sentence_21.mp3", category: "전시위치" },
      { english: "Where is the modern art section?", korean: "현대 미술 구역은 어디인가요?", audio: "sentence_22.mp3", category: "전시위치" },
      { english: "I love abstract art. Where can I find it?", korean: "추상화를 좋아해요. 어디에서 볼 수 있나요?", audio: "sentence_23.mp3", category: "전시위치" },
      { english: "Do you have any works by Georgia O'Keeffe?", korean: "조지아 오키프의 작품이 있나요?", audio: "sentence_24.mp3", category: "전시" },
      { english: "Is there a special exhibit today?", korean: "오늘 특별 전시가 있나요?", audio: "sentence_25.mp3", category: "전시" },
      { english: "What is the most famous piece in this museum?", korean: "이 박물관에서 가장 유명한 작품은 무엇인가요?", audio: "sentence_26.mp3", category: "작품정보" },
      { english: "Is there a section for Native American art?", korean: "원주민 예술 구역이 있나요?", audio: "sentence_27.mp3", category: "전시위치" },
      { english: "Are there any works by Andy Warhol here?", korean: "앤디 워홀의 작품이 있나요?", audio: "sentence_28.mp3", category: "전시" },
      { english: "Where can I see ancient Egyptian artifacts?", korean: "고대 이집트 유물은 어디서 볼 수 있나요?", audio: "sentence_29.mp3", category: "전시위치" },
      { english: "Is this part of the permanent collection?", korean: "이건 상설 전시인가요?", audio: "sentence_30.mp3", category: "전시" },
      { english: "Where is the restroom?", korean: "화장실이 어디에 있나요?", audio: "sentence_31.mp3", category: "시설" },
      { english: "Is there a cafe or restaurant inside?", korean: "안에 카페나 식당이 있나요?", audio: "sentence_32.mp3", category: "시설" },
      { english: "How do I get to the gift shop?", korean: "기념품 가게는 어떻게 가나요?", audio: "sentence_33.mp3", category: "시설" },
      { english: "Can you show me the way to the East Wing?", korean: "동쪽 전시관으로 가는 길을 알려주세요.", audio: "sentence_34.mp3", category: "안내정보" },
      { english: "Is there an elevator to the second floor?", korean: "2층으로 가는 엘리베이터가 있나요?", audio: "sentence_35.mp3", category: "시설" },
      { english: "Are lockers available for bags?", korean: "가방 보관함이 있나요?", audio: "sentence_36.mp3", category: "시설" },
      { english: "Where can I find the children's section?", korean: "어린이 전시 구역은 어디인가요?", audio: "sentence_37.mp3", category: "전시위치" },
      { english: "Is there a quiet area to sit?", korean: "조용히 앉을 수 있는 공간이 있나요?", audio: "sentence_38.mp3", category: "시설" },
      { english: "How far is the next exhibit?", korean: "다음 전시 구역까지 얼마나 걸리나요?", audio: "sentence_39.mp3", category: "전시위치" },
      { english: "Are strollers allowed inside?", korean: "유모차를 안에 들일 수 있나요?", audio: "sentence_40.mp3", category: "이용규칙" },
      { english: "How do I use the audio guide?", korean: "오디오 가이드는 어떻게 사용하나요?", audio: "sentence_41.mp3", category: "전시관람" },
      { english: "Is the audio guide included in the ticket?", korean: "오디오 가이드는 입장권에 포함되어 있나요?", audio: "sentence_42.mp3", category: "입장" },
      { english: "Are there any educational programs today?", korean: "오늘 교육 프로그램이 있나요?", audio: "sentence_43.mp3", category: "프로그램" },
      { english: "Do you have any workshops for kids?", korean: "아이들을 위한 워크숍이 있나요?", audio: "sentence_44.mp3", category: "프로그램" },
      { english: "Is there a podcast or app for this museum?", korean: "이 박물관 관련 팟캐스트나 앱이 있나요?", audio: "sentence_45.mp3", category: "안내정보" },
      { english: "Are there subtitles or transcripts available?", korean: "자막이나 스크립트가 있나요?", audio: "sentence_46.mp3", category: "접근성" },
      { english: "Where can I find more info about this artist?", korean: "이 작가에 대해 더 알 수 있는 정보는 어디에 있나요?", audio: "sentence_47.mp3", category: "작품정보" },
      { english: "Is this exhibit suitable for children?", korean: "이 전시는 아이들이 봐도 괜찮은가요?", audio: "sentence_48.mp3", category: "전시" },
      { english: "Do you offer lectures or talks?", korean: "강연이나 토크도 제공하나요?", audio: "sentence_49.mp3", category: "프로그램" },
      { english: "Are there any virtual tours?", korean: "가상 투어도 있나요?", audio: "sentence_50.mp3", category: "전시관람" },
      { english: "This painting is breathtaking.", korean: "이 그림은 숨이 멎을 만큼 아름다워요.", audio: "sentence_51.mp3", category: "감상" },
      { english: "I love the colors in this piece.", korean: "이 작품의 색감이 정말 좋아요.", audio: "sentence_52.mp3", category: "감상" },
      { english: "The details are incredible.", korean: "디테일이 정말 대단하네요.", audio: "sentence_53.mp3", category: "감상" },
      { english: "This reminds me of Monet's work.", korean: "이건 모네의 작품을 떠올리게 하네요.", audio: "sentence_54.mp3", category: "감상" },
      { english: "The lighting here is perfect.", korean: "여기 조명이 정말 좋아요.", audio: "sentence_55.mp3", category: "감상" },
      { english: "What a powerful message!", korean: "정말 강렬한 메시지네요!", audio: "sentence_56.mp3", category: "감상" },
      { english: "This sculpture feels so lifelike.", korean: "이 조각은 정말 생동감 있어요.", audio: "sentence_57.mp3", category: "감상" },
      { english: "It's hard to believe this was made by hand.", korean: "이게 수작업이라니 믿기지 않아요.", audio: "sentence_58.mp3", category: "감상" },
      { english: "The textures are amazing.", korean: "텍스처가 정말 멋져요.", audio: "sentence_59.mp3", category: "감상" },
      { english: "This is my favorite exhibit so far.", korean: "지금까지 본 전시 중 최고예요.", audio: "sentence_60.mp3", category: "감상" },
      { english: "Do you sell postcards of this painting?", korean: "이 그림 엽서도 판매하나요?", audio: "sentence_61.mp3", category: "기념품" },
      { english: "Are there exhibition catalogs available?", korean: "전시 카탈로그도 있나요?", audio: "sentence_62.mp3", category: "기념품" },
      { english: "Is this available in other languages?", korean: "이건 다른 언어로도 있나요?", audio: "sentence_63.mp3", category: "안내정보" },
      { english: "Can I buy a print of this artwork?", korean: "이 작품의 프린트를 구매할 수 있나요?", audio: "sentence_64.mp3", category: "기념품" },
      { english: "Are these items handmade?", korean: "이 물건들은 수제인가요?", audio: "sentence_65.mp3", category: "기념품" },
      { english: "Do you have any books on this artist?", korean: "이 작가에 대한 책이 있나요?", audio: "sentence_66.mp3", category: "기념품" },
      { english: "Is this item limited edition?", korean: "이건 한정판인가요?", audio: "sentence_67.mp3", category: "기념품" },
      { english: "Can I get a bag for this?", korean: "이거 담을 가방 있나요?", audio: "sentence_68.mp3", category: "기념품" },
      { english: "Is there a discount for members?", korean: "회원 할인 있나요?", audio: "sentence_69.mp3", category: "기념품" },
      { english: "Do you ship internationally?", korean: "해외 배송도 되나요?", audio: "sentence_70.mp3", category: "기념품" },
      { english: "Where is the best spot for photos?", korean: "사진 찍기 가장 좋은 장소는 어디인가요?", audio: "sentence_71.mp3", category: "사진" },
      { english: "Are tripods allowed?", korean: "삼각대를 써도 되나요?", audio: "sentence_72.mp3", category: "사진" },
      { english: "Is there a hashtag I can use for social media?", korean: "SNS에 쓸 해시태그가 있나요?", audio: "sentence_73.mp3", category: "사진" },
      { english: "Do you have a media kit?", korean: "미디어 키트가 있나요?", audio: "sentence_74.mp3", category: "안내정보" },
      { english: "Can I post photos on Instagram?", korean: "인스타그램에 사진 올려도 되나요?", audio: "sentence_75.mp3", category: "사진" },
      { english: "Is this artwork copyrighted?", korean: "이 작품은 저작권이 있나요?", audio: "sentence_76.mp3", category: "사진" },
      { english: "Can I take a photo with the sculpture?", korean: "이 조각상과 사진 찍어도 되나요?", audio: "sentence_77.mp3", category: "사진" },
      { english: "Are selfie sticks permitted?", korean: "셀카봉 사용 가능한가요?", audio: "sentence_78.mp3", category: "사진" },
      { english: "Is there a photography tour?", korean: "사진 투어도 있나요?", audio: "sentence_79.mp3", category: "프로그램" },
      { english: "Can I film a short video here?", korean: "짧은 영상 촬영해도 되나요?", audio: "sentence_80.mp3", category: "사진" },
      { english: "How long does it take to see everything?", korean: "모두 보려면 얼마나 걸리나요?", audio: "sentence_81.mp3", category: "전시관람" },
      { english: "What time does the last tour start?", korean: "마지막 투어는 몇 시에 시작하나요?", audio: "sentence_82.mp3", category: "전시관람" },
      { english: "I'll come back tomorrow for the rest.", korean: "내일 나머지를 보러 다시 올게요.", audio: "sentence_83.mp3", category: "방문계획" },
      { english: "Can I see this in under an hour?", korean: "1시간 이내에 볼 수 있을까요?", audio: "sentence_84.mp3", category: "방문계획" },
      { english: "Which exhibit should I visit first?", korean: "어느 전시를 먼저 봐야 하나요?", audio: "sentence_85.mp3", category: "안내정보" },
      { english: "I don't want to miss the highlight pieces.", korean: "하이라이트 작품은 꼭 보고 싶어요.", audio: "sentence_86.mp3", category: "전시관람" },
      { english: "How much time do people usually spend here?", korean: "보통 사람들은 여기서 얼마나 머무나요?", audio: "sentence_87.mp3", category: "방문계획" },
      { english: "Where is the exit?", korean: "출구는 어디에 있나요?", audio: "sentence_88.mp3", category: "시설" },
      { english: "I'd love to come back again.", korean: "다시 오고 싶어요.", audio: "sentence_89.mp3", category: "감상" },
      { english: "This museum exceeded my expectations.", korean: "이 박물관은 제 기대 이상이었어요.", audio: "sentence_90.mp3", category: "감상" },
      { english: "Is there a membership program?", korean: "회원 프로그램이 있나요?", audio: "sentence_91.mp3", category: "안내정보" },
      { english: "Do you have a newsletter I can subscribe to?", korean: "구독할 수 있는 뉴스레터가 있나요?", audio: "sentence_92.mp3", category: "안내정보" },
      { english: "Are pets allowed inside?", korean: "애완동물을 데려갈 수 있나요?", audio: "sentence_93.mp3", category: "이용규칙" },
      { english: "Do you offer group discounts?", korean: "단체 할인 있나요?", audio: "sentence_94.mp3", category: "입장" },
      { english: "Is there a coat check?", korean: "코트 맡기는 곳이 있나요?", audio: "sentence_95.mp3", category: "시설" },
      { english: "Can I volunteer here?", korean: "여기서 자원봉사할 수 있나요?", audio: "sentence_96.mp3", category: "참여" },
      { english: "Do you accept donations?", korean: "기부도 받나요?", audio: "sentence_97.mp3", category: "참여" },
      { english: "Is this museum wheelchair accessible?", korean: "이 박물관은 휠체어 접근이 가능한가요?", audio: "sentence_98.mp3", category: "접근성" },
      { english: "How can I support this museum?", korean: "이 박물관을 어떻게 도울 수 있나요?", audio: "sentence_99.mp3", category: "참여" },
      { english: "What's the best time to visit for fewer crowds?", korean: "덜 붐비는 시간은 언제인가요?", audio: "sentence_100.mp3", category: "방문계획" },
      { english: "What time does the exhibition start?", korean: "전시회는 몇 시에 시작하나요?", audio: "sentence_101.mp3", category: "전시" },
      { english: "Do you have an audio guide?", korean: "오디오 가이드가 있나요?", audio: "sentence_102.mp3", category: "전시관람" },
      { english: "Is photography allowed?", korean: "사진을 찍어도 되나요?", audio: "sentence_103.mp3", category: "사진" },
      { english: "What is the most famous piece here?", korean: "가장 유명한 작품은 무엇인가요?", audio: "sentence_104.mp3", category: "작품정보" },
      { english: "Who painted this artwork?", korean: "이 작품은 누가 그렸나요?", audio: "sentence_105.mp3", category: "작품정보" },
      { english: "Could you explain more about this piece?", korean: "작품에 대해 더 설명해 주시겠어요?", audio: "sentence_106.mp3", category: "작품정보" },
      { english: "Where is the gift shop?", korean: "기념품 가게는 어디 있나요?", audio: "sentence_107.mp3", category: "시설" },
      { english: "What are the museum's hours?", korean: "미술관 운영시간은 어떻게 되나요?", audio: "sentence_108.mp3", category: "안내정보" },
      { english: "Where is the nearest subway station?", korean: "가까운 지하철역은 어디인가요?", audio: "sentence_109.mp3", category: "교통" },
      { english: "How long does the tour last?", korean: "투어는 얼마나 걸리나요?", audio: "sentence_110.mp3", category: "전시관람" },
      { english: "What's the most popular exhibit here?", korean: "여기서 가장 인기 있는 전시는 무엇인가요?", audio: "sentence_111.mp3", category: "전시" },
      { english: "Are there any special events today?", korean: "오늘 특별 이벤트가 있나요?", audio: "sentence_112.mp3", category: "프로그램" },
      { english: "What artwork should I definitely see in this museum?", korean: "이 박물관에서 꼭 봐야 할 작품은 무엇인가요?", audio: "sentence_113.mp3", category: "안내정보" },
      { english: "Are there good restaurants nearby?", korean: "근처에 맛있는 식당이 있나요?", audio: "sentence_114.mp3", category: "주변시설" },
      { english: "Do you offer a group discount?", korean: "단체 할인이 있나요?", audio: "sentence_115.mp3", category: "입장" },
      { english: "When is the next guided tour?", korean: "다음 가이드 투어는 몇 시인가요?", audio: "sentence_116.mp3", category: "전시관람" },
      { english: "Do you have a guidebook in English?", korean: "영어 안내 책자가 있나요?", audio: "sentence_117.mp3", category: "안내정보" }
    ];

    // DOM 요소
    const searchInput = document.getElementById('searchInput');
    const resultsContainer = document.getElementById('results');
    const totalCountElement = document.getElementById('totalCount');
    const filteredCountElement = document.getElementById('filteredCount');
    const categoryCountElement = document.getElementById('categoryCount');
    const categoryListElement = document.querySelector('.category-list');
    const mobileCategoriesElement = document.querySelector('.mobile-categories');

    // 상태
    let currentCategory = '전체';
    let currentSearch = '';

    // 초기화
    function init() {
      // 카테고리 추출
      const categories = ['전체', ...new Set(museumData.map(item => item.category))];
      
      // 카테고리 카운트 업데이트
      categoryCountElement.textContent = categories.length - 1;
      
      // 전체 데이터 수 업데이트
      totalCountElement.textContent = museumData.length;
      
      // 카테고리 버튼 생성
      renderCategories(categories);
      
      // 초기 결과 렌더링
      renderResults();
      
      // 이벤트 리스너 추가
      searchInput.addEventListener('input', handleSearch);
    }

    // 카테고리 렌더링
    function renderCategories(categories) {
      // 사이드바 카테고리
      categoryListElement.innerHTML = '';
      categories.forEach(category => {
        const categoryCount = category === '전체' 
          ? museumData.length 
          : museumData.filter(item => item.category === category).length;
        
        const button = document.createElement('button');
        button.className = `category-button ${category === currentCategory ? 'active' : ''}`;
        button.textContent = category;
        
        const countSpan = document.createElement('span');
        countSpan.className = 'count';
        countSpan.textContent = categoryCount;
        button.appendChild(countSpan);
        
        button.addEventListener('click', () => {
          currentCategory = category;
          updateCategoryButtons();
          renderResults();
        });
        
        categoryListElement.appendChild(button);
      });
      
      // 모바일 카테고리
      mobileCategoriesElement.innerHTML = '';
      categories.forEach(category => {
        const button = document.createElement('button');
        button.className = `mobile-category-button ${category === currentCategory ? 'active' : ''}`;
        button.textContent = category;
        
        button.addEventListener('click', () => {
          currentCategory = category;
          updateCategoryButtons();
          renderResults();
        });
        
        mobileCategoriesElement.appendChild(button);
      });
    }

    // 카테고리 버튼 상태 업데이트
    function updateCategoryButtons() {
      // 사이드바 카테고리 버튼
      const categoryButtons = document.querySelectorAll('.category-button');
      categoryButtons.forEach(button => {
        if (button.textContent.includes(currentCategory)) {
          button.classList.add('active');
        } else {
          button.classList.remove('active');
        }
      });
      
      // 모바일 카테고리 버튼
      const mobileCategoryButtons = document.querySelectorAll('.mobile-category-button');
      mobileCategoryButtons.forEach(button => {
        if (button.textContent === currentCategory) {
          button.classList.add('active');
        } else {
          button.classList.remove('active');
        }
      });
    }

    // 검색 처리
    function handleSearch(e) {
      currentSearch = e.target.value;
      renderResults();
    }

    // 결과 렌더링
    function renderResults() {
      // 필터링
      const filtered = museumData.filter(item => {
        const matchText = 
          item.english.toLowerCase().includes(currentSearch.toLowerCase()) ||
          item.korean.includes(currentSearch);
        const matchCategory = currentCategory === '전체' || item.category === currentCategory;
        return matchText && matchCategory;
      });
      
      // 필터링된 결과 수 업데이트
      filteredCountElement.textContent = filtered.length;
      
      // 결과 렌더링
      if (filtered.length === 0) {
        resultsContainer.innerHTML = `
          <div class="empty-results">
            <p>검색 결과가 없습니다.</p>
          </div>
        `;
      } else {
        resultsContainer.innerHTML = `<div class="results-list"></div>`;
        const resultsList = resultsContainer.querySelector('.results-list');
        
        filtered.forEach((item, index) => {
          const card = document.createElement('div');
          card.className = 'result-card';
          card.innerHTML = `
            <div class="result-card-content">
              <div class="result-header">
                <span class="result-tag">${item.category}</span>
                <span class="result-number">#${index + 1}</span>
              </div>
              <p class="result-english">${item.english}</p>
              <p class="result-korean">${item.korean}</p>
              <div>
                <audio 
                  controls 
                  src="./audio/${item.audio}" 
                  class="result-audio"
                  onerror="this.outerHTML='<p class=\'error-message\'>오디오 파일을 불러올 수 없습니다.</p>'"
                ></audio>
              </div>
            </div>
          `;
          resultsList.appendChild(card);
        });
      }
    }

    // 앱 초기화
    init();

    // 챗봇 관련 코드
    const chatbotData = {
      greetings: [
        "안녕하세요! 미술관 영어 도우미입니다. 어떻게 도와드릴까요?",
        "반갑습니다! 미술관 관련 영어 표현이 필요하신가요?",
        "안녕하세요! 미술관 방문에 필요한 영어 표현을 찾아드릴게요."
      ],
      categories: {
        "입장": "입장료, 티켓 구매, 학생 할인 등에 관한 표현들이 있어요.",
        "전시관람": "전시 관람과 가이드 투어에 관한 표현들이 있어요.",
        "작품정보": "작품의 작가, 제작 연도,
        "전시위치": "특정 전시나 작품을 찾는 데 도움이 되는 표현들이 있어요.",
        "감상": "작품에 대한 감상을 표현하는 문장들이 있어요.",
        "시설": "화장실, 카페, 기념품점 등 시설 관련 표현들이 있어요.",
        "사진": "사진 촬영 관련 표현들이 있어요.",
        "기념품": "기념품 구매와 관련된 표현들이 있어요."
      },
      faqs: {
        "사용 방법": "상단의 검색창에서 원하는 표현을 검색하거나, 왼쪽 사이드바에서 카테고리별로 표현을 볼 수 있어요.",
        "오디오": "각 표현 카드 하단에 있는 오디오 플레이어를 클릭하면 발음을 들을 수 있어요.",
        "다운로드": "현재 다운로드 기능은 제공하지 않아요. 필요한 표현은 메모해두시는 것이 좋아요.",
        "표현 수": "현재 총 117개의 미술관 관련 영어 표현이 있어요.",
        "추천": "미술관에서 가장 많이 사용되는 표현은 '입장료는 얼마인가요?', '사진을 찍어도 되나요?', '이 작품의 작가는 누구인가요?' 등이 있어요."
      },
      fallbacks: [
        "죄송해요, 정확히 이해하지 못했어요. 다른 질문을 해주시겠어요?",
        "다른 방식으로 질문해 주시겠어요?",
        "미술관 영어 표현이나 이 앱 사용에 관한 질문을 해주시면 더 잘 답변해드릴 수 있어요."
      ]
    };

    // DOM 요소
    const chatbotToggle = document.getElementById('chatbotToggle');
    const chatbotContainer = document.getElementById('chatbotContainer');
    const chatbotClose = document.getElementById('chatbotClose');
    const chatbotMessages = document.getElementById('chatbotMessages');
    const chatbotInput = document.getElementById('chatbotInput');
    const chatbotSend = document.getElementById('chatbotSend');

    // 챗봇 토글
    chatbotToggle.addEventListener('click', () => {
      chatbotContainer.classList.add('active');
      if (chatbotMessages.children.length === 0) {
        addBotMessage(getRandomItem(chatbotData.greetings));
      }
    });

    // 챗봇 닫기
    chatbotClose.addEventListener('click', () => {
      chatbotContainer.classList.remove('active');
    });

    // 메시지 전송
    function sendMessage() {
      const message = chatbotInput.value.trim();
      if (message) {
        addUserMessage(message);
        chatbotInput.value = '';
        setTimeout(() => {
          const response = generateResponse(message);
          addBotMessage(response);
        }, 500);
      }
    }

    // 엔터키 처리
    chatbotInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendMessage();
      }
    });

    // 전송 버튼 클릭
    chatbotSend.addEventListener('click', sendMessage);

    // 봇 메시지 추가
    function addBotMessage(message) {
      const msgElement = document.createElement('div');
      msgElement.className = 'chatbot-message bot';
      msgElement.innerHTML = `
        <div class="chatbot-avatar">🤖</div>
        <div class="chatbot-text">${message}</div>
      `;
      chatbotMessages.appendChild(msgElement);
      chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    // 사용자 메시지 추가
    function addUserMessage(message) {
      const msgElement = document.createElement('div');
      msgElement.className = 'chatbot-message user';
      msgElement.innerHTML = `
        <div class="chatbot-text">${message}</div>
      `;
      chatbotMessages.appendChild(msgElement);
      chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    // 응답 생성
    function generateResponse(message) {
      const normalizedMessage = message.toLowerCase();
      
      // 카테고리 질문
      for (const [category, description] of Object.entries(chatbotData.categories)) {
        if (normalizedMessage.includes(category)) {
          const examples = museumData
            .filter(item => item.category === category)
            .slice(0, 3)
            .map(item => `"${item.english}" (${item.korean})`)
            .join('<br>');
          
          return `${description}<br><br>예시 표현:<br>${examples}`;
        }
      }
      
      // FAQ 확인
      for (const [question, answer] of Object.entries(chatbotData.faqs)) {
        if (normalizedMessage.includes(question)) {
          return answer;
        }
      }
      
      // 검색 결과
      const searchResults = museumData.filter(item => 
        item.english.toLowerCase().includes(normalizedMessage) || 
        item.korean.includes(message)
      );
      
      if (searchResults.length > 0) {
        const resultList = searchResults
          .slice(0, 3)
          .map(item => `"${item.english}" (${item.korean})`)
          .join('<br>');
        
        return `찾으시는 표현과 관련된 ${searchResults.length}개의 표현이 있습니다.<br><br>${resultList}`;
      }
      
      // 기본 응답
      return getRandomItem(chatbotData.fallbacks);
    }

    // 배열에서 랜덤 아이템 가져오기
    function getRandomItem(array) {
      return array[Math.floor(Math.random() * array.length)];
    }
  </script>
</body>
</html> 