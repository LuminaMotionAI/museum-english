    // 응답 생성
    function generateResponse(message) {
      const normalizedMessage = message.toLowerCase().trim();
      
      // 인사말 체크
      if (normalizedMessage.includes('안녕') || normalizedMessage.includes('hi') || 
          normalizedMessage.includes('hello') || normalizedMessage.includes('반가') ||
          normalizedMessage === '?') {
        return getRandomItem(chatbotData.greetings);
      }
      
      // 짧은 키워드 체크 - 카테고리
      const categoryKeywords = {
        '입장': ['입장', '티켓', '표', '할인', '입장료', '학생'],
        '전시관람': ['관람', '전시', '투어', '가이드', '오디오'],
        '작품정보': ['작품', '작가', '그림', '제작', '연도', '재료', '조각'],
        '전시위치': ['위치', '어디', '찾기', '섹션', '구역'],
        '감상': ['감상', '좋아', '멋져', '아름', '대단'],
        '시설': ['시설', '화장실', '카페', '식당', '음식', '휴게'],
        '사진': ['사진', '촬영', '찍기', '카메라', '셀카', '인스타'],
        '기념품': ['기념품', '선물', '구매', '쇼핑', '책', '엽서']
      };
      
      for (const [category, keywords] of Object.entries(categoryKeywords)) {
        if (keywords.some(keyword => normalizedMessage.includes(keyword))) {
          const examples = museumData
            .filter(item => item.category === category)
            .slice(0, 3)
            .map(item => `"${item.english}" (${item.korean})`)
            .join('<br>');
          
          return `${chatbotData.categories[category]}<br><br>예시 표현:<br>${examples}`;
        }
      }
      
      // FAQ 확인 - 짧은 키워드로도 매칭
      const faqKeywords = {
        '사용 방법': ['사용', '방법', '어떻게', '쓰는', '이용', '설명', '도움말'],
        '오디오': ['오디오', '발음', '듣기', '소리', '재생'],
        '다운로드': ['다운', '저장', '오프라인', '백업'],
        '표현 수': ['몇 개', '수', '개수', '얼마나', '전체'],
        '추천': ['추천', '알려', '알려줘', '뭐가', '유용', '인기', '많이']
      };
      
      for (const [question, keywords] of Object.entries(faqKeywords)) {
        if (keywords.some(keyword => normalizedMessage.includes(keyword))) {
          return chatbotData.faqs[question];
        }
      }
      
      // 직접 검색어 매칭 시도
      const keywords = normalizedMessage.split(/\s+/).filter(word => word.length > 1);
      
      if (keywords.length > 0) {
        const searchResults = museumData.filter(item => 
          keywords.some(word => 
            item.english.toLowerCase().includes(word) || 
            item.korean.includes(word)
          )
        );
        
        if (searchResults.length > 0) {
          const resultList = searchResults
            .slice(0, 3)
            .map(item => `"${item.english}" (${item.korean})`)
            .join('<br>');
          
          return `찾으시는 표현과 관련된 ${searchResults.length}개의 표현이 있습니다.<br><br>${resultList}`;
        }
      }
      
      // 기본 응답
      return getRandomItem(chatbotData.fallbacks);
    } 